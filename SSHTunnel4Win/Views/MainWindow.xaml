<Window x:Class="SSHTunnel4Win.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:SSHTunnel4Win.Views"
        xmlns:vm="clr-namespace:SSHTunnel4Win.ViewModels"
        xmlns:res="clr-namespace:SSHTunnel4Win.Resources"
        xmlns:conv="clr-namespace:SSHTunnel4Win.Converters"
        Title="{x:Static res:Strings.SSHTunnelManager}"
        Width="750" Height="500" MinWidth="600" MinHeight="400"
        WindowStartupLocation="CenterScreen">
    <Window.Resources>
        <conv:ConnectionStateToColorConverter x:Key="StateToColor"/>
        <conv:BoolToVisibilityConverter x:Key="BoolToVis"/>
        <conv:InverseBoolToVisibilityConverter x:Key="InvBoolToVis"/>
    </Window.Resources>

    <DockPanel>
        <!-- Menu bar -->
        <Menu DockPanel.Dock="Top">
            <MenuItem Header="{x:Static res:Strings.File}">
                <MenuItem Header="{x:Static res:Strings.AddTunnel}" Click="AddClick" InputGestureText="Ctrl+N"/>
                <MenuItem Header="{x:Static res:Strings.ImportFromShareString}" Click="ImportClick"/>
                <Separator/>
                <MenuItem Header="{x:Static res:Strings.Settings}" Click="SettingsClick" InputGestureText="Ctrl+,"/>
                <Separator/>
                <MenuItem Header="{x:Static res:Strings.Quit}" Click="QuitClick" InputGestureText="Alt+F4"/>
            </MenuItem>
            <MenuItem Header="{x:Static res:Strings.Tunnels}">
                <MenuItem Header="{x:Static res:Strings.DisconnectAll}" Click="DisconnectAllClick"/>
            </MenuItem>
            <MenuItem Header="{x:Static res:Strings.Help}">
                <MenuItem Header="{x:Static res:Strings.RunningSSHProcesses}" Click="ProcessListClick"/>
                <MenuItem Header="{x:Static res:Strings.Help}" Click="HelpClick"/>
                <Separator/>
                <MenuItem Header="{x:Static res:Strings.CheckForUpdates}" Click="CheckForUpdatesClick"/>
            </MenuItem>
        </Menu>

        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="280" MinWidth="200"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*" MinWidth="300"/>
            </Grid.ColumnDefinitions>

            <!-- Sidebar -->
            <DockPanel Grid.Column="0">
                <!-- Tab selector -->
                <UniformGrid DockPanel.Dock="Top" Columns="2" Margin="8,8,8,4">
                    <RadioButton x:Name="TunnelTabBtn" Content="{x:Static res:Strings.Tunnels}"
                                 IsChecked="True" GroupName="SidebarTab"
                                 Style="{StaticResource {x:Type ToggleButton}}"
                                 Click="TunnelTabClick"/>
                    <RadioButton x:Name="SSHConfigTabBtn" Content="{x:Static res:Strings.SSHConfig}"
                                 GroupName="SidebarTab"
                                 Style="{StaticResource {x:Type ToggleButton}}"
                                 Click="SSHConfigTabClick"/>
                </UniformGrid>

                <!-- Toolbar -->
                <ToolBarTray DockPanel.Dock="Top">
                    <ToolBar Band="1" BandIndex="1">
                        <Button x:Name="AddBtn" Click="AddClick" ToolTip="{x:Static res:Strings.AddTunnel}">
                            <TextBlock Text="+" FontSize="16" FontWeight="Bold"/>
                        </Button>
                        <Button Click="ImportClick" ToolTip="{x:Static res:Strings.ImportFromShareString}">
                            <TextBlock Text="&#xE896;" FontFamily="Segoe MDL2 Assets" FontSize="14"/>
                        </Button>
                        <Button Click="ProcessListClick" ToolTip="{x:Static res:Strings.RunningSSHProcesses}">
                            <TextBlock Text="&#xE756;" FontFamily="Segoe MDL2 Assets" FontSize="14"/>
                        </Button>
                        <Button Click="HelpClick" ToolTip="{x:Static res:Strings.Help}">
                            <TextBlock Text="?" FontSize="14" FontWeight="Bold"/>
                        </Button>
                    </ToolBar>
                </ToolBarTray>

                <!-- Content: use Grid so both lists can fill -->
                <Grid>
                    <local:TunnelListView x:Name="TunnelList"/>
                    <local:SSHConfigListView x:Name="SSHConfigList" Visibility="Collapsed"/>
                </Grid>
            </DockPanel>

            <GridSplitter Grid.Column="1" Width="3" HorizontalAlignment="Center"
                          VerticalAlignment="Stretch" ResizeBehavior="PreviousAndNext"/>

            <!-- Detail pane -->
            <ContentControl Grid.Column="2" x:Name="DetailPane"
                            HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch"/>
        </Grid>
    </DockPanel>
</Window>
